(this["webpackJsonpmy-spotify-clone"]=this["webpackJsonpmy-spotify-clone"]||[]).push([[0],{184:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(59),c=n.n(i),o=n(46),s=(n(184),n(18)),l=n.n(s),u=n(22),d=n(8),j=n(21),p=n(148),b=n(277),x=n(266),f=n(64),m=n(278),h=n(131),O=n.p+"static/media/Spotify_Logo_Black.0d1e5545.png",v=n.p+"static/media/login_bg.6a0c9085.jpg",g=n(1);function y(){return Object(g.jsxs)(m.a,{sx:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundImage:"url(".concat(v,")"),backgroundPosition:"center"},children:[Object(g.jsx)(m.a,{sx:{height:"300px"},children:Object(g.jsx)(m.a,{component:"img",src:O,sx:{width:"auto",height:"150px"}})}),Object(g.jsx)(f.a,{href:"https://my-spotify-player.onrender.com/login",size:"large",variant:"contained",sx:{color:"#ffffff",fontSize:"16px",fontWeight:"fontWeightMedium",backgroundColor:h.a[600],"&:hover":{backgroundColor:h.a[700]}},children:"Login with Spotify"})]})}var k=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,i,c,o,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1&&void 0!==s[1]?s[1]:"",a=s.length>2&&void 0!==s[2]?s[2]:{},r=!(s.length>3&&void 0!==s[3])||s[3],(i=new URL(r?"https://api.spotify.com/v1".concat(n):n)).search=new URLSearchParams(a),(c=new Headers).append("Authorization","Bearer ".concat(t)),c.append("Content-Type","application/json"),e.next=11,fetch(i,{headers:c});case 11:if(!(o=e.sent).ok){e.next=16;break}return e.next=15,o.json();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(a.createContext)(),C=function(e){var t=e.reducer,n=e.initState,r=e.children;return Object(g.jsx)(w.Provider,{value:Object(a.useReducer)(t,n),children:r})},S=function(){return Object(a.useContext)(w)},E=n(14),T="SET_TOKEN",I="SET_CURRENT",W="SET_USER",M="SET_PLAYLIST",R="SET_PLAYER",A="SET_VOLUME",L="SET_DURATION",z={isLoggedin:!1,token:"",current:"",user:{},player:{playing:!1,audioElement:null,duration:0,currentTime:0,volume:.4,track:{},id:0},playlist:{loading:!0,name:"",cover:null,tracks:[]}},_=function(e,t){switch(t.type){case T:return t.token?Object(E.a)(Object(E.a)({},e),{},{isLoggedin:!0,token:t.token}):Object(E.a)(Object(E.a)({},e),{},{isLoggedin:!1,token:t.token});case I:return Object(E.a)(Object(E.a)({},e),{},{current:t.key});case W:return Object(E.a)(Object(E.a)({},e),{},{user:t.user});case R:return Object(E.a)(Object(E.a)({},e),{},{player:Object(E.a)(Object(E.a)({},e.player),t.player)});case M:return Object(E.a)(Object(E.a)({},e),{},{playlist:Object(E.a)(Object(E.a)({},e.playlist),t.playlist)});case A:return Object(E.a)(Object(E.a)({},e),{},{player:Object(E.a)(Object(E.a)({},e.player),{},{volume:t.volume})});case L:return Object(E.a)(Object(E.a)({},e),{},{player:Object(E.a)(Object(E.a)({},e.player),{},{duration:t.duration})});case"SET_CURRENTTIME":return Object(E.a)(Object(E.a)({},e),{},{player:Object(E.a)(Object(E.a)({},e.player),{},{audioElement:Object(E.a)(Object(E.a)({},e.player.audioElement),{},{currentTime:t.currentTime})})});default:return e}},D=n(134),G=n.n(D),B=n(135),F=n.n(B),P=n(138),U=n.n(P),H=n(273),N=n(279),V=n(270),q=n(272),J=n(151),Y=n(262),K=n(263),Q=[{name:"Home",Icon:G.a,path:"home"},{name:"Search",Icon:F.a,path:"search"}];var X=function(e){var t=e.open,n=void 0!==t&&t,r=e.setOpen,i=void 0===r?function(){}:r,c=Object(j.g)(),o=Object(j.f)(),s=S(),p=Object(d.a)(s,2),b=p[0],x=b.current,f=b.token,h=p[1];Object(a.useEffect)((function(){Q.forEach((function(e){var t=e.name,n=e.path;o.pathname!=="/".concat(n)&&o.pathname.split("/")[1]!==n||h({type:I,key:t})}))}),[h,o.pathname]);var O=Object(a.useState)([]),v=Object(d.a)(O,2),y=v[0],w=v[1],C=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=5;break}return e.next=3,k(f,"/me/playlists");case 3:t=e.sent,w(null===t||void 0===t?void 0:t.items);case 5:case"end":return e.stop()}}),e)}))),[f]);Object(a.useEffect)((function(){C()}),[C]);var T={width:"".concat(200,"px"),backgroundColor:"#ffffff",position:"fixed",top:"".concat(64,"px"),"& .MuiDrawer-paper":{position:"static",width:"".concat(200,"px"),boxSizing:"border-box",borderRight:0}},W=Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N.a,{sx:{"& .MuiTypography-root":{color:"text.primary"}},children:Q.map((function(e,t){var n=e.name,a=e.Icon,r=e.path;return Object(g.jsxs)(V.a,{button:!0,selected:x===n,onClick:function(e){return function(e,t,n){n&&c(n)}(0,0,r)},sx:{"&.Mui-selected":{color:"primary.dark",backgroundColor:"rgba(98, 150, 119, 0.18)","&:hover":{backgroundColor:"rgba(98, 150, 119, 0.18)"}}},children:[Object(g.jsx)(J.a,{sx:{color:"inherit",minWidth:function(e){return e.spacing(5)}},children:Object(g.jsx)(a,{})}),Object(g.jsx)(Y.a,{primary:n,sx:{"& .MuiTypography-root":{color:"inherit"}}})]},n)}))}),Object(g.jsx)(K.a,{}),Object(g.jsx)(m.a,{sx:{px:2,pt:2,display:"flex",flexDirection:"column",rowGap:function(e){return e.spacing(1)}},children:y.map((function(e){return Object(g.jsx)(q.a,{sx:{width:"fit-content",maxWidth:"100%",px:1,"& .MuiChip-icon":{ml:0},"& .MuiChip-label":{pl:1,pr:.5}},icon:Object(g.jsx)(U.a,{sx:{fontSize:"16px"}}),color:"primary",label:e.name,onClick:function(){return c("/playlist/".concat(e.id)),void h({type:I,key:"Playlist"})}},e.name)}))})]});return Object(g.jsxs)(m.a,{component:"nav",sx:{width:{md:200},flexShrink:{md:0}},children:[Object(g.jsx)(H.a,{variant:"temporary",open:n,onClose:function(){return i(!n)},ModalProps:{keepMounted:!0},sx:Object(E.a)(Object(E.a)({},T),{},{top:0,bottom:0,display:{sm:"block",md:"none"}}),children:W}),Object(g.jsx)(H.a,{variant:"permanent",sx:Object(E.a)(Object(E.a)({},T),{},{display:{xs:"none",sm:"none",md:"block"},height:"calc(100vh - ".concat(160,"px)")}),open:!0,children:W})]})},Z=n(65),$=n(139),ee=n.n($),te=n(140),ne=n.n(te);var ae=function(e){var t=e.setOpen,n=void 0===t?function(){}:t,a=S(),r=Object(d.a)(a,2)[1];return Object(g.jsxs)(m.a,{component:"header",sx:{display:"flex",justifyContent:{md:"flex-end",xs:"space-between"},alignItems:"center",px:3,height:64,color:"grey.50",background:function(e){return"linear-gradient(90deg, ".concat(e.palette.primary.light,", ").concat(e.palette.primary.main,")")},position:"sticky",top:0,zIndex:"appBar"},children:[Object(g.jsx)(Z.a,{color:"inherit",sx:{display:{md:"none"}},fontSize:"inherit",onClick:function(){return n((function(e){return!e}))},children:Object(g.jsx)(ee.a,{})}),Object(g.jsx)(Z.a,{color:"inherit",fontSize:"inherit",onClick:function(){r({type:T,token:""}),sessionStorage.removeItem("isLoggedin")},children:Object(g.jsx)(ne.a,{})})]})},re=n(5),ie=n(99),ce=n(121),oe=n(280),se=n(271),le=n(143),ue=n.n(le),de=n(144),je=n.n(de),pe=n(81),be=n.n(pe),xe=n(91),fe=n.n(xe),me=n(142),he=n.n(me),Oe=n(141),ve=n.n(Oe);var ge=function(e,t){return Object(a.useEffect)((function(){e.audioElement&&(e.playing?(e.audioElement.volume=e.volume,e.audioElement.play()):e.playing||e.audioElement.pause())}),[t,e.playing,e.volume,e.audioElement]),[function(){t({type:R,player:{playing:!1}})},function(){var n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.track,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.id,i=a.preview_url,c=null===(n=e.audioElement)||void 0===n?void 0:n.src;e.playing&&i!==c?(e.audioElement.pause(),t({type:R,player:{track:a,id:r,audioElement:new Audio(i)}})):e.playing||i!==c?t({type:R,player:{playing:!0,track:a,id:r,audioElement:new Audio(i)}}):t({type:R,player:{playing:!0}})},function(e){t({type:A,volume:e})}]},ye={color:"primary.main",cursor:"pointer"},ke=function(e){return e?{":hover":{transform:"scale(1.2)"},transition:"all 0.3s !important"}:{opacity:.38,":hover":{},cursor:"auto"}},we=Object(re.a)(ie.a)({fontSize:"0.75rem",opacity:.38,fontWeight:500,letterSpacing:.2});var Ce=function(){var e,t,n,r,i,c,o,s=S(),l=Object(d.a)(s,2),u=l[0],j=u.player,p=u.playlist,b=l[1],x=p.tracks,f=ge(j,b),h=Object(d.a)(f,3),O=h[0],v=h[1],y=h[2],k=j.track,w=x.length&&1===j.id,C=x.length&&j.id+1>x.length;Object(a.useEffect)((function(){j.audioElement&&(j.audioElement.onended=function(){b({type:R,player:{playing:!1,audioElement:new Audio(j.track.preview_url)}})})}),[b,j.id,j.audioElement,j.track.preview_url]);var T=Object(a.useRef)(null),I=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(j.playing){I.current||(I.current=!0,T.current=setInterval((function(){var e;b({type:L,duration:null===(e=j.audioElement)||void 0===e?void 0:e.duration})}),200))}else!j.playing&&j.id&&(clearInterval(T.current),I.current=!1)}),[j.id,j.playing,b,null===(e=j.audioElement)||void 0===e?void 0:e.duration]);var W=function(e){if(e){var t=Math.round(e),n=Math.floor(t/60),a=t%60;return"".concat(n>9?n:"0".concat(n),":").concat(a>9?a:"0".concat(a))}return"00:00"};return Object(g.jsxs)(m.a,{component:"footer",sx:{display:"flex",columnGap:"8px",justifyContent:"space-between",alignItems:"center",padding:2,width:"100%",height:"".concat(96,"px"),color:"text.primary",borderTop:"1px solid #dae7e3",position:"fixed",bottom:0,zIndex:"appBar",backgroundColor:"background.default"},children:[Object(g.jsxs)(m.a,{sx:{flexBasis:"30%",maxWidth:"30%",display:"flex",height:"100%",columnGap:"16px"},children:[Object(g.jsx)(m.a,{component:"img",src:null===(t=k.album)||void 0===t||null===(n=t.images)||void 0===n?void 0:n[0].url,sx:{height:"100%",borderRadius:1}}),Object(g.jsxs)(m.a,{sx:{maxWidth:"calc(100% - 80px)",display:"flex",flexDirection:"column",justifyContent:"center",rowGap:"8px"},children:[Object(g.jsx)(ce.a,{title:k.name||"",placement:"top-start",arrow:!0,children:Object(g.jsx)(m.a,{sx:{fontWeight:"fontWeightMedium",maxWidth:"100%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:k.name})}),Object(g.jsx)(m.a,{children:null===(r=k.artists)||void 0===r?void 0:r[0].name})]})]}),Object(g.jsxs)(m.a,{sx:{flexGrow:1,flexShrink:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(g.jsxs)(m.a,{sx:{display:"flex",alignItems:"center",columnGap:"16px"},children:[Object(g.jsx)(ve.a,{sx:Object(E.a)(Object(E.a)({},ye),ke(j.id&&!w)),onClick:function(){if(!w){var e=j.id-1;v(x[e-1],e)}}}),j.playing?Object(g.jsx)(fe.a,{fontSize:"large",sx:Object(E.a)(Object(E.a)({},ye),ke(!0)),onClick:O}):Object(g.jsx)(be.a,{fontSize:"large",sx:Object(E.a)(Object(E.a)({},ye),ke(j.audioElement)),onClick:function(){return v()}}),Object(g.jsx)(he.a,{sx:Object(E.a)(Object(E.a)({},ye),ke(j.id&&!C)),onClick:function(){if(!C){var e=j.id+1;v(x[e-1],e)}}})]}),Object(g.jsx)(oe.a,{variant:"determinate",value:j.audioElement?(null===(i=j.audioElement)||void 0===i?void 0:i.currentTime)/(null===(c=j.audioElement)||void 0===c?void 0:c.duration)*100:0,sx:{width:"100%",mt:1}}),Object(g.jsxs)(m.a,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(g.jsx)(we,{children:W(null===(o=j.audioElement)||void 0===o?void 0:o.currentTime)}),Object(g.jsx)(we,{children:W(j.duration)})]})]}),Object(g.jsxs)(m.a,{sx:{flexBasis:"30%",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(g.jsx)(ue.a,{sx:{color:"primary.main",opacity:.38}}),Object(g.jsx)(se.a,{"aria-label":"Volume",defaultValue:40,onChangeCommitted:function(e,t){return y(t/100)},sx:{width:"85px",mx:1,"& .MuiSlider-track":{border:"none"},"& .MuiSlider-thumb":{width:16,height:16,"&:before":{boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},"&:hover, &.Mui-focusVisible, &.Mui-active":{boxShadow:"none"}}}}),Object(g.jsx)(je.a,{sx:{color:"primary.main",opacity:.38}})]})]})},Se=n(287),Ee=n(275),Te=n(281),Ie=n(282),We=n(284),Me=n(283),Re=n(274),Ae={transition:"box-shadow .3s,border-color .3s",":hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},Le=n.p+"static/media/panorama.c71fa1f3.svg",ze=104;var _e=function(e){var t=e.loading,n=void 0===t||t,r=e.data,i=void 0===r?{}:r,c=Object(j.g)(),o=Object(a.useState)(!1),s=Object(d.a)(o,2),p=s[0],b=s[1],x=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c("/playlist/".concat(i.id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(Te.a,{sx:Ae,children:n?Object(g.jsx)(Re.a,{animation:"wave",variant:"rectangular",height:ze}):Object(g.jsx)(Ie.a,{onClick:x,children:Object(g.jsxs)(m.a,{sx:{display:"flex",height:"".concat(ze,"px")},children:[Object(g.jsxs)(m.a,{sx:{width:"".concat(ze,"px"),flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(g.jsx)(Me.a,{component:"img",sx:{width:"60%",display:p?"none":"block"},src:Le,alt:i.name}),Object(g.jsx)(Me.a,{component:"img",sx:{width:"".concat(ze,"px"),display:p?"block":"none"},src:i.images[0].url,alt:i.name,onLoad:function(){return b(!0)}})]}),Object(g.jsxs)(We.a,{children:[Object(g.jsx)(ie.a,{component:"div",variant:"body1",sx:{display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.name}),Object(g.jsx)(ie.a,{variant:"body2",color:"text.secondary",component:"div",sx:{display:"-webkit-box",WebkitLineClamp:"2",WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:i.description})]})]})})})};var De=function(e){var t,n=e.loading,r=void 0!==n&&n,i=e.data,c=void 0===i?{}:i,o=Object(j.g)(),s=Object(a.useState)(!1),p=Object(d.a)(s,2),b=p[0],x=p[1],f=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"playlist"===c.type?o("/playlist/".concat(c.id)):"artist"===c.type&&o("/artist/".concat(c.id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(Te.a,{sx:Ae,children:r?Object(g.jsx)(Re.a,{animation:"wave",variant:"rectangular",height:263}):Object(g.jsx)(Ie.a,{onClick:f,children:Object(g.jsxs)(m.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(g.jsx)(m.a,{sx:{pt:3,px:2,borderRadius:"12px"},children:Object(g.jsxs)(m.a,{sx:{borderRadius:"12px",overflow:"hidden",aspectRatio:"1/1",display:"flex",alignItems:"center"},children:[Object(g.jsx)(Me.a,{component:"img",sx:{width:"50%",margin:"0 auto",display:b?"none":"block"},src:Le,alt:c.name}),Object(g.jsx)(Me.a,{component:"img",sx:{width:"100%",aspectRatio:"1/1",display:b?"block":"none"},src:null===(t=c.images[0])||void 0===t?void 0:t.url,alt:c.name,onLoad:function(){return x(!0)}})]})}),Object(g.jsx)(We.a,{children:Object(g.jsx)(ie.a,{component:"div",variant:"body1",sx:{display:"-webkit-box",WebkitLineClamp:"1",WebkitBoxOrient:"vertical",overflow:"hidden"},children:c.description||c.name})})]})})})};var Ge=function(){var e=S(),t=Object(d.a)(e,1)[0].token,n=Object(a.useState)({loading:!0,data:Array.from(Array(6),(function(){return null}))}),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)({loading:!0,data:Array.from(Array(6),(function(){return null}))}),s=Object(d.a)(o,2),j=s[0],p=s[1],b=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,k(t,"/browse/featured-playlists",{limit:6});case 3:n=e.sent,c({loading:!1,data:n.playlists.items});case 5:case"end":return e.stop()}}),e)}))),[t]),x=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,k(t,"/browse/categories/toplists/playlists",{limit:10});case 3:a=e.sent,p({loading:!1,data:null===a||void 0===a||null===(n=a.playlists)||void 0===n?void 0:n.items});case 5:case"end":return e.stop()}}),e)}))),[t]);return Object(a.useEffect)((function(){b()}),[b]),Object(a.useEffect)((function(){x()}),[x]),Object(g.jsxs)(m.a,{sx:{display:"flex",flexDirection:"column",rowGap:3},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(ie.a,{variant:"h4",component:"div",sx:{mb:2,fontWeight:"medium"},children:"Welcome"}),Object(g.jsx)(Ee.a,{container:!0,rowSpacing:2,columnSpacing:3,zeroMinWidth:!0,children:i.data.map((function(e,t){return Object(g.jsx)(Ee.a,{item:!0,xs:12,sm:6,md:4,xl:4,children:Object(g.jsx)(_e,{data:e,loading:i.loading})},t)}))})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)(ie.a,{variant:"h5",component:"div",sx:{mb:2,fontWeight:"medium"},children:"Top Lists"}),Object(g.jsx)(Ee.a,{container:!0,rowSpacing:2,columnSpacing:3,zeroMinWidth:!0,children:j.data.map((function(e,t){return Object(g.jsx)(Ee.a,{item:!0,xs:12,sm:4,md:3,xl:2,children:Object(g.jsx)(De,{data:e,loading:j.loading})},t)}))})]})]})},Be=n(119),Fe=function(e){var t=e.data,n=void 0===t?[]:t,a=Object(j.g)();return Object(g.jsx)(m.a,{sx:{maxWidth:"100%",display:"grid",gridTemplateColumns:{xs:"repeat(2, minmax(0, 1fr))",sm:"repeat(3, minmax(0, 1fr))",md:"repeat(4, minmax(0, 1fr))",lg:"repeat(4, minmax(0, 1fr))"},columnGap:"24px",rowGap:"24px"},children:n.map((function(e){var t=e.name,n=e.id,r=e.icons[0].url;return Object(g.jsxs)(m.a,{onClick:function(){return function(e){a(e)}(n)},sx:{lineHeight:0,borderRadius:"8px",overflow:"hidden",position:"relative","::before":{content:'""',background:"linear-gradient(to bottom,\trgba(0,0,0,0) 0%,\trgba(0,0,0,0.7) 100%)",width:"100%",height:"50%",position:"absolute",top:"100%",left:0,zIndex:2,opacity:0,transition:"all 0.3s"},":hover":{cursor:"pointer","::before":{top:"50%",opacity:1},".title":{bottom:0}}},children:[Object(g.jsx)(m.a,{component:"img",src:r,alt:t,sx:{width:"100%",aspectRatio:"1/1"}}),Object(g.jsx)(m.a,{className:"title",sx:{width:"100%",lineHeight:"normal",textAlign:"center",position:"absolute",bottom:"-100px",left:0,zIndex:3,transition:"all 0.3s",color:"common.white",pb:1},children:t})]},n)}))})},Pe=n(155),Ue=n(145),He=n(267),Ne=Object(He.a)(Ue.a)({border:0,padding:0,".MuiDataGrid-cell, .MuiDataGrid-columnHeader":{"&:focus":{outline:"none"}},".MuiDataGrid-cell--withRenderer":{display:"block",".number.current":{display:"none"},".play":{display:"none"},".current":{display:"initial"}},".MuiDataGrid-row:hover":{".number":{display:"none","&.noPreview":{display:"initial"}},".play":{display:"initial"}}}),Ve=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},c=function(e){return e&&t.playing?Object(g.jsx)(fe.a,{className:"play ".concat(e?"current":""),onClick:r}):Object(g.jsx)(be.a,{className:"play ".concat(e?"current":""),onClick:function(){return i(n,a)}})},o=(null===n||void 0===n?void 0:n.preview_url)===(null===(e=t.track)||void 0===e?void 0:e.preview_url);return Object(g.jsxs)(m.a,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center","& .play":{transition:"all 0.3s","&:hover":{cursor:"pointer",color:h.a[600]}}},children:[Object(g.jsx)("div",{className:"number ".concat(o?"current":""," ").concat((null===n||void 0===n?void 0:n.preview_url)?"":"noPreview"),children:a}),(null===n||void 0===n?void 0:n.preview_url)&&c(o)]})},qe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.jsxs)(m.a,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",rowGap:function(e){return e.spacing(1)},"& div":{lineHeight:"initial",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&:nth-child(2)":{color:h.a[500]}}},children:[Object(g.jsx)("div",{children:t.name}),Object(g.jsx)("div",{children:null===(e=t.artists)||void 0===e?void 0:e.map((function(e,t){return t?", ".concat(e.name):e.name}))})]})},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Math.round(e.duration_ms/1e3),n=Math.floor(t/60),a=t%60;return"".concat(a).length<2&&(a="0".concat(a)),"".concat(n,":").concat(a)};var Ye=function(e){var t=e.fetchTracks,n=S(),r=Object(d.a)(n,2),i=r[0],c=i.token,o=i.player,s=i.playlist,p=r[1],b=s.name,x=s.cover,f=s.tracks,h=ge(o,p),O=Object(d.a)(h,2),v=O[0],y=O[1],w=Object(j.h)().id,C=Object(j.f)().pathname,T=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return p({type:M,playlist:{loading:!0}}),e.next=4,k(c,"/playlists/".concat(w));case 4:(t=e.sent)&&p({type:M,playlist:{loading:!1,name:t.name,cover:null===(n=t.images[0])||void 0===n?void 0:n.url,tracks:t.tracks.items.filter((function(e){return e.track})).map((function(e,t){return Object(E.a)(Object(E.a)({},e.track),{},{id:t+1})}))}});case 6:case"end":return e.stop()}}),e)}))),[c,w,p]);Object(a.useEffect)((function(){t?t():T()}),[t,T]),Object(a.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"}),p({type:R,player:{id:0}}),p({type:M,playlist:{loading:!0,name:"",cover:null}})}),[p]);var I=[{field:"#",renderCell:function(e){var t=e.row;return Ve(o,t,t.id,v,y)},width:50,sortable:!1},{field:"Title",renderCell:function(e){var t=e.row;return qe(t)},flex:1,minWidth:0,sortable:!1},{field:"Album",renderCell:function(e){var t;return null===(t=e.row.album)||void 0===t?void 0:t.name},flex:1,minWidth:0,sortable:!1},{field:"Duration",renderCell:function(e){var t=e.row;return Je(t)},width:90,sortable:!1}];return Object(g.jsxs)(g.Fragment,{children:[s.loading&&"/search"!==C?Object(g.jsx)(Re.a,{animation:"wave",variant:"rectangular",width:"100px",height:"100px",sx:{borderRadius:"8px",overflow:"hidden",mb:2}}):s.name?Object(g.jsxs)(m.a,{sx:{display:"flex",alignItems:"center",height:"100px",mb:2},children:[Object(g.jsx)(m.a,{sx:{width:"100px",height:"100px",borderRadius:"8px",overflow:"hidden",mr:2},children:Object(g.jsx)(m.a,{component:"img",src:x,sx:{width:"100%"}})}),Object(g.jsx)(ie.a,{variant:"h5",component:"div",sx:{fontWeight:"medium"},children:b})]}):null,Object(g.jsx)(Pe.a,{sx:{px:"24px",pt:"16px"},children:Object(g.jsx)(Ne,{rows:f,columns:I,hideFooter:!0,autoHeight:!0,disableColumnFilter:!0,disableColumnMenu:!0,disableVirtualization:!0,rowHeight:60})})]})},Ke=function(e){var t,n=e.data,r=void 0===n?{}:n,i=e.onClickSeeAll,c=e.showAllSearchedTracks,o=void 0!==c&&c,s=S(),l=Object(d.a)(s,2),u=l[0].playlist,j=l[1],p=r.tracks,b=r.artists,x=Object(a.useCallback)((function(){o||(null===p||void 0===p?void 0:p.items)&&j({type:M,playlist:{loading:!1,tracks:p.items.slice(0,3).map((function(e,t){return Object(E.a)(Object(E.a)({},e),{},{id:t+1})}))}})}),[j,p,o]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:p&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ie.a,{variant:"h5",component:"div",sx:{fontWeight:"medium"},children:"Tracks"}),u.tracks.length<(null===(t=p.items)||void 0===t?void 0:t.length)&&Object(g.jsx)(f.a,{size:"small",onClick:i,children:"See All"})]})}),Object(g.jsx)(Ye,{fetchTracks:x}),Object(g.jsx)(ie.a,{variant:"h5",component:"div",sx:{fontWeight:"medium"},children:"Artists"}),Object(g.jsx)(Ee.a,{container:!0,rowSpacing:2,columnSpacing:3,children:b.items.map((function(e,t){return Object(g.jsx)(Ee.a,{item:!0,xs:12,sm:4,md:3,xl:2,zeroMinWidth:!0,children:Object(g.jsx)(De,{data:e})},t)}))})]})},Qe=n(147),Xe=n.n(Qe),Ze=function(e){var t=e.data,n=e.setShowAllSearchedTracks,r=S(),i=Object(d.a)(r,2),c=i[0].player,o=i[1],s=ge(c,o),l=Object(d.a)(s,2),u=l[0],j=l[1];Object(a.useEffect)((function(){o({type:M,playlist:{tracks:t.items.map((function(e,t){return Object(E.a)(Object(E.a)({},e),{},{id:t+1})}))}})}),[o,t.items]);var p=[{field:"#",renderCell:function(e){var t=e.row;return Ve(c,t,t.id,u,j)},width:50,sortable:!1},{field:"Title",renderCell:function(e){var t=e.row;return qe(t)},flex:1,minWidth:0,sortable:!1},{field:"Album",renderCell:function(e){var t;return null===(t=e.row.album)||void 0===t?void 0:t.name},flex:1,minWidth:0,sortable:!1},{field:"Duration",renderCell:function(e){var t=e.row;return Je(t)},width:90,sortable:!1}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Z.a,{color:"primary","aria-label":"back",component:"div",sx:{width:"fit-content"},children:Object(g.jsx)(Xe.a,{onClick:function(){return n(!1)}})}),Object(g.jsx)(Ye,{fetchTracks:function(){},customColumns:p})]})},$e=function(){var e=S(),t=Object(d.a)(e,1)[0].token,n=Object(a.useState)(""),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(null),s=Object(d.a)(o,2),j=s[0],p=s[1],b=Object(a.useState)(!1),x=Object(d.a)(b,2),f=x[0],h=x[1],O=Object(a.useState)([]),v=Object(d.a)(O,2),y=v[0],w=v[1],C=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,k(t,"/browse/categories");case 3:n=e.sent,w(n.categories.items);case 5:case"end":return e.stop()}}),e)}))),[t]);Object(a.useEffect)((function(){C()}),[C]);var T=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=7;break}return e.next=3,k(t,"/search",{type:"artist",q:"artist:".concat(i)});case 3:(n=e.sent)&&p((function(e){return Object(E.a)(Object(E.a)({},e),{},{artists:n.artists})})),e.next=8;break;case 7:p(null);case 8:case"end":return e.stop()}}),e)}))),[i,t]),I=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=7;break}return e.next=3,k(t,"/search",{type:"album,track",q:"album:".concat(i)});case 3:(n=e.sent)&&p((function(e){return Object(E.a)(Object(E.a)({},e),{},{albums:n.albums,tracks:n.tracks})})),e.next=8;break;case 7:p(null);case 8:case"end":return e.stop()}}),e)}))),[i,t]),W=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.next=4,I();case 4:case"end":return e.stop()}}),e)}))),[T,I]);Object(a.useEffect)((function(){W()}),[W]);return Object(g.jsxs)(m.a,{sx:{display:"flex",flexDirection:"column",rowGap:"16px"},children:[!f&&Object(g.jsx)(Be.a,{size:"small",placeholder:"Search for artist or track",sx:{width:"300px"},value:i,onChange:function(e){return c(e.target.value)}}),j?f?Object(g.jsx)(Ze,{data:j.tracks,setShowAllSearchedTracks:h}):Object(g.jsx)(Ke,{data:j,onClickSeeAll:function(){h(!0)},showAllSearchedTracks:f}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(m.a,{children:Object(g.jsx)(ie.a,{variant:"h5",component:"div",sx:{fontWeight:"medium"},children:"Browse all"})}),Object(g.jsx)(Fe,{data:y})]})]})},et=function(){var e=Object(j.h)().category,t=S(),n=Object(d.a)(t,1)[0].token,r=Object(a.useState)({loading:!1,data:[]}),i=Object(d.a)(r,2),c=i[0],o=i[1],s=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,k(n,"/browse/categories/".concat(e,"/playlists"));case 3:(a=t.sent)&&o({loading:!1,data:a.playlists.items});case 5:case"end":return t.stop()}}),t)}))),[n,e]);return Object(a.useEffect)((function(){s()}),[s]),Object(g.jsx)(Ee.a,{container:!0,rowSpacing:2,columnSpacing:3,children:c.data.map((function(e,t){return Object(g.jsx)(Ee.a,{item:!0,xs:12,sm:4,md:3,xl:2,zeroMinWidth:!0,children:Object(g.jsx)(De,{data:e,loading:c.loading})},t)}))})},tt=function(){var e=S(),t=Object(d.a)(e,2),n=t[0].token,r=t[1],i=Object(j.h)().id,c=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:M,playlist:{loading:!0}}),e.next=3,k(n,"/artists/".concat(i));case 3:return a=e.sent,e.next=6,k(n,"/artists/".concat(i,"/top-tracks"),{market:"ES"});case 6:c=e.sent,r({type:M,playlist:{loading:!1,name:a.name,cover:null===(t=a.images)||void 0===t?void 0:t[0].url,tracks:c.tracks.map((function(e,t){return Object(E.a)(Object(E.a)({},e),{},{id:t+1})}))}});case 8:case"end":return e.stop()}}),e)}))),[n,i,r]);return Object(g.jsx)(Ye,{fetchTracks:c})};var nt=function(){return Object(g.jsx)(Se.a,{maxWidth:"xl",sx:{py:3,height:"100%"},children:Object(g.jsxs)(j.d,{children:[Object(g.jsx)(j.b,{path:"/home",element:Object(g.jsx)(Ge,{})}),Object(g.jsx)(j.b,{path:"/search",element:Object(g.jsx)($e,{})}),Object(g.jsx)(j.b,{path:"/search/:category",element:Object(g.jsx)(et,{})}),Object(g.jsx)(j.b,{path:"/playlist/:id",element:Object(g.jsx)(Ye,{})}),Object(g.jsx)(j.b,{path:"/artist/:id",element:Object(g.jsx)(tt,{})}),Object(g.jsx)(j.b,{path:"/*",element:Object(g.jsx)(j.a,{to:"/home"})})]})})};var at=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ae,{open:n,setOpen:r}),Object(g.jsxs)(m.a,{component:"section",sx:{display:"flex",flexGrow:1,marginBottom:"".concat(96,"px"),minHeight:"calc(100vh - ".concat(160,"px)")},children:[Object(g.jsx)(X,{open:n,setOpen:r}),Object(g.jsx)(m.a,{sx:{flexGrow:1,maxWidth:"100%"},children:Object(g.jsx)(nt,{})})]}),Object(g.jsx)(Ce,{})]})};var rt=function(){var e=Object(j.g)(),t=S(),n=Object(d.a)(t,2),r=n[0],i=r.token,c=r.isLoggedin,o=n[1],s=Object(p.a)({palette:{primary:{main:"#629677"},secondary:{main:"#629677"},background:{default:"#f3f7f6"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}});Object(a.useEffect)((function(){var t=function(){var e=window.location.hash.substring(1),t={};return e&&(t=e.split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),t)),t}().access_token;t&&(window.history.replaceState(null,"",window.location.pathname+window.location.search),o({type:T,token:t}),sessionStorage.setItem("isLoggedin",!0),e("home"))}),[o,e]);var f=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/https://my-spotify-player.onrender.com/refresh_token");case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:n=e.sent,o({type:T,token:n.token});case 8:case"end":return e.stop()}}),e)}))),[o]);Object(a.useEffect)((function(){!i&&sessionStorage.getItem("isLoggedin")&&f()}),[i,c,f]);var m=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=5;break}return e.next=3,k(i,"/me");case 3:t=e.sent,o({type:W,user:t});case 5:case"end":return e.stop()}}),e)}))),[i,o]);return Object(a.useEffect)((function(){m()}),[m]),Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(b.a,{theme:s,children:[Object(g.jsx)(x.a,{}),i||sessionStorage.getItem("isLoggedin")?Object(g.jsx)(at,{}):Object(g.jsx)(y,{})]})})},it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,288)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(C,{reducer:_,initState:z,children:Object(g.jsx)(o.a,{children:Object(g.jsx)(rt,{})})})}),document.getElementById("root")),it()}},[[195,1,2]]]);
//# sourceMappingURL=main.df32dac5.chunk.js.map